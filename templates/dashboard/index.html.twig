{% extends 'base.html.twig' %}

{% block title %}Dashboard{% endblock %}

{% block body %}
<div class="dashboard-container">
    <h1 class="dashboard-title">Admin Dashboard</h1>

    <!-- Cards -->
    <div class="cards">
        <div class="card card-restaurants">
            <div class="card-icon">üè¨</div>
            <div class="card-content">
                <h3>{{ restaurants|length }}</h3>
                <p>Restaurants</p>
            </div>
        </div>
        <div class="card card-dishes">
            <div class="card-icon">üçΩÔ∏è</div>
            <div class="card-content">
                <h3>{{ dishes|length }}</h3>
                <p>Dishes</p>
            </div>
        </div>
        <div class="card card-reservations">
            <div class="card-icon">üìÖ</div>
            <div class="card-content">
                <h3>{{ reservations|length }}</h3>
                <p>Total Reservations</p>
            </div>
        </div>
        <div class="card card-today">
            <div class="card-icon">‚è∞</div>
            <div class="card-content">
                <h3>{{ reservationsToday|length }}</h3>
                <p>Today's Reservations</p>
            </div>
        </div>
    </div>

    <!-- Latest Restaurants -->
    <div class="tables-section">
        <h2>Latest Restaurants</h2>
        <table class="dashboard-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Address</th>
                    <th>Phone</th>
                    <th>Email</th>
                </tr>
            </thead>
            <tbody>
                {% for restaurant in latestRestaurants %}
                <tr>
                    <td>{{ restaurant.id }}</td>
                    <td>{{ restaurant.name }}</td>
                    <td>{{ restaurant.address }}</td>
                    <td>{{ restaurant.phone }}</td>
                    <td>{{ restaurant.email }}</td>
                </tr>
                {% else %}
                <tr><td colspan="5">No restaurants found.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Latest Dishes -->
    <div class="tables-section">
        <h2>Latest Dishes</h2>
        <table class="dashboard-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Restaurant</th>
                </tr>
            </thead>
            <tbody>
                {% for dish in latestDishes %}
                <tr>
                    <td>{{ dish.id }}</td>
                    <td>{{ dish.name }}</td>
                    <td>{{ dish.price }} $</td>
                    <td>{{ dish.restaurant.name }}</td>
                </tr>
                {% else %}
                <tr><td colspan="4">No dishes found.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Latest Reservations -->
    <div class="tables-section">
        <h2>Latest Reservations</h2>
        <table class="dashboard-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Customer Name</th>
                    <th>Email</th>
                    <th>Restaurant</th>
                    <th>Date & Time</th>
                    <th>People</th>
                </tr>
            </thead>
            <tbody>
                {% for res in latestReservations %}
                <tr>
                    <td>{{ res.id }}</td>
                    <td>{{ res.customerName }}</td>
                    <td>{{ res.customerEmail }}</td>
                    <td>{{ res.restaurant.name }}</td>
                    <td>{{ res.dateTime|date('Y-m-d H:i') }}</td>
                    <td>{{ res.numberOfPeople }}</td>
                </tr>
                {% else %}
                <tr><td colspan="6">No reservations found.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<style>
.dashboard-container {
    max-width: 1200px;
    margin: 40px auto;
    padding: 0 20px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.dashboard-title {
    text-align: center;
    font-size: 2.5rem;
    margin-bottom: 40px;
    color: #4a4a4a;
}

/* Cards */
.cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
}

.card {
    display: flex;
    align-items: center;
    padding: 20px;
    border-radius: 12px;
    background: #f8f9fa;
    box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 24px rgba(0,0,0,0.15);
}

.card-icon {
    font-size: 3rem;
    margin-right: 15px;
}

.card-content h3 {
    margin: 0;
    font-size: 2rem;
    color: #333;
}

.card-content p {
    margin: 5px 0 0 0;
    color: #666;
}

/* Card colors */
.card-restaurants { border-left: 5px solid #3498db; }
.card-dishes { border-left: 5px solid #2ecc71; }
.card-reservations { border-left: 5px solid #f1c40f; }
.card-today { border-left: 5px solid #e74c3c; }

/* Tables */
.tables-section {
    margin-top: 40px;
}

.tables-section h2 {
    margin-bottom: 15px;
    color: #4a4a4a;
}

.dashboard-table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.dashboard-table th,
.dashboard-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #eee;
}

.dashboard-table th {
    background-color: #f0f0f0;
    color: #333;
}

.dashboard-table tr:hover {
    background-color: #f9f9f9;
}
</style>
{% endblock %}
