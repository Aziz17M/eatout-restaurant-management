{% extends 'base.html.twig' %}

{% block title %}Dishes{% endblock %}

{% block body %}
<div class="container">
    <h1>Dishes</h1>
    {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('app_dish_new') }}" class="btn">Create New Dish</a>
    {% endif %}

    <table>
        <thead>
            <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Category</th>
                <th>Price</th>
                <th>Restaurant</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for dish in dishes %}
            <tr>
                <td>
                    {% if dish.image %}
                        <img src="{{ asset('uploads/dishes/' ~ dish.image) }}" alt="{{ dish.name }}" class="dish-thumbnail">
                    {% else %}
                        <div class="no-image">üçΩÔ∏è</div>
                    {% endif %}
                </td>
                <td>{{ dish.name }}</td>
                <td>
                    {% if dish.category %}
                        <span class="category-badge">{{ dish.category }}</span>
                    {% endif %}
                </td>
                <td class="price-cell">${{ dish.price }}</td>
                <td>{{ dish.restaurant.name }}</td>
                <td>
                    <a href="{{ path('app_dish_show', {'id': dish.id}) }}" class="btn">Show</a>
                    {% if is_granted('ROLE_ADMIN') %}
                        <a href="{{ path('app_dish_edit', {'id': dish.id}) }}" class="btn">Edit</a>
                    {% endif %}
                </td>
            </tr>
            {% else %}
            <tr><td colspan="5">No dishes yet</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
